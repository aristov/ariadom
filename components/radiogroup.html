<!doctype html>
<meta charset=utf-8>
<title>Радиогруппа</title>
<style>
    body
    {
        font: 13px Arial;
    }
</style>
<style>
    span[role=radiogroup]
    {
        display: inline-block;
    }
</style>
<style>
    button[role=radio]
    {
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.2);
        font: 13px/13px Arial;
        padding: 6px 10px;
        cursor: pointer;
    }
    button[role=radio]:not(:last-of-type)
    {
        border-right-width: 0;
    }
    button[role=radio]:first-of-type
    {
        border-top-left-radius: 3px;
        border-bottom-left-radius: 3px;
    }
    button[role=radio]:last-of-type
    {
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
    }
    button[role=radio]:hover
    {
        border-color: rgba(0, 0, 0, 0.3);
    }
    button[role=radio]:focus
    {
        outline: 0;
        border-color: #ffdb4d;
        box-shadow: inset 0 0 0 1px #ffdb4d;
    }
    button[role=radio]:active
    {
        background: #f3f1ed;
    }
    button[role=radio]::-moz-focus-inner
    {
        border: 0;
    }
</style>
<style>
    button[role=radio][aria-checked=true]
    {
        background: #ffeba0;
        border-color: rgba(153, 122, 0, 0.5);
    }
    button[role=radio][aria-checked=true]:hover
    {
        border-color: rgba(129, 103, 0, 0.6);
    }
    button[role=radio][aria-checked=true]:active
    {
        background: #fee481;
    }
</style>
<style>
    span[role=radiogroup] > label
    {
        display: inline-block;
        margin-bottom: 3px;
        margin-right: 6px;
    }
</style>
<script>
(function() {
    function switchRadio(current, target) {
        if(current){
            current.removeAttribute('aria-checked');
            current.setAttribute('tabindex', '-1');
        }
        target.setAttribute('aria-checked', 'true');
        target.removeAttribute('tabindex');

        updateValue(target);
    }

    function updateValue(current) {
        var input = current.parentElement.querySelector('input[type=hidden]');
        input && (input.value = current.value);
    }

    function nextRadio(element) {
        do element = element.nextElementSibling || element.parentElement.firstElementChild;
        while(element.getAttribute('role') !== 'radio');
        return element;
    }

    function previousRadio(element) {
        do element = element.previousElementSibling || element.parentElement.lastElementChild;
        while(element.getAttribute('role') !== 'radio');
        return element;
    }

    document.addEventListener('click', function(e) {
        var target = e.target;
        if(target.getAttribute('role') === 'radio') {
            if(target.getAttribute('aria-checked') !== 'true') {
                switchRadio(
                    target.parentElement.querySelector('button[aria-checked=true]'),
                    target);
                target.focus();
            }
        }
    });

    document.addEventListener('keypress', function(e) {
        var target = e.target;
        if(e.keyCode >= 37 && e.keyCode <=40 && target.getAttribute('role') === 'radio') {
            var next = e.keyCode >= 39? nextRadio(target) : previousRadio(target);
            e.ctrlKey || switchRadio(target, next);
            next.focus();
        }
    });
})();
</script>
<script>
    document.addEventListener('click', function(e) {
        var target = e.target;
        if(target.nodeName === 'LABEL') {
            var parent = target.parentElement;
            if(parent.getAttribute('role') === 'radiogroup') {
                firstRadio = parent.querySelector('button[role=radio]');
                firstRadio && firstRadio.focus();
            }
        }
    });
</script>
<form>
    <label for=radioinput>Нативная радиогруппа</label><br>
    <label><input type=radio name=radioinput value=one id=radioinput>Раз</label>
    <label><input type=radio name=radioinput value=two>Два</label>
    <label><input type=radio name=radioinput value=three>Три</label>
    <hr>
    <span role=radiogroup>
        <input type=hidden name=radiobar>
        <label>Радиобар</label><br>
        <button type=button role=radio value=one>Раз</button
        ><button type=button role=radio tabindex=-1 value=two>Два</button
        ><button type=button role=radio tabindex=-1 value=three>Три</button>
    </span>
    <hr>
    <input type=submit>
</form>
