<!doctype html>
<html>
<head>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=0">

    <title>ARIAButton transform</title>

    <script src=../design/role.js></script>
    <script src=../design/ARIAButton.js></script>
    <script>
        ARIAButton.attachToDocument();
    </script>

    <link rel=stylesheet href=../style/yandex.css>
    <style>
        body
        {
            margin: 20px;
        }
        pre
        {
            background: rgba(0, 0, 0, 0.05);
        }
        section
        {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <script type=ariaml>
    <root>
        <button label="Simple"/>
        <button pressed="true" label="Pressed"/>
        <button disabled="true" label="Disabled"/>
        <button pressed="true" disabled="true" label="Pressed disabled"/>
    </root>
    </script>
    <pre></pre>
    <script>
        var source = document.querySelector('script[type=ariaml]').innerHTML;

        document.querySelector('pre').textContent = source;

        function transform() {
            var parser = new DOMParser(),
                parsed = parser.parseFromString(source.trim(), 'application/xml'),
                root = parsed.documentElement;

            Array.prototype.forEach.call(root.children, function(button) {
                var result = ARIAButton.transform(button),
                    section = document.createElement('section');

                section.appendChild(result);
                document.body.appendChild(section);
            });
        };
    </script>

    <button onclick="this.parentElement.removeChild(this);transform();">Transform</button>
</body>
</html>
